# Arquitectura del Sistema - Comercial Comarapa

**VersiÃ³n:** 1.1  
**Fecha:** Enero 2026  
**Estado:** DocumentaciÃ³n de Alto Nivel  
**Ãšltima actualizaciÃ³n:** Enero 9, 2026 - AÃ±adida funcionalidad de ImportaciÃ³n IA

---

## 1. VisiÃ³n General

Comercial Comarapa es un sistema de gestiÃ³n de inventario diseÃ±ado para tiendas minoristas. El sistema permite a los empleados buscar productos rÃ¡pidamente, consultar precios y verificar disponibilidad de stock.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          COMERCIAL COMARAPA                                  â”‚
â”‚                     Sistema de GestiÃ³n de Inventario                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚   ğŸ‘¤ Usuario                                                                 â”‚
â”‚      â”‚                                                                       â”‚
â”‚      â–¼                                                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚    FRONTEND      â”‚ â”€â”€â”€â–º â”‚     BACKEND      â”‚ â”€â”€â”€â–º â”‚   BASE DE DATOS  â”‚  â”‚
â”‚   â”‚  (Interfaz Web)  â”‚ â—„â”€â”€â”€ â”‚   (API REST)     â”‚ â—„â”€â”€â”€ â”‚   (PostgreSQL)   â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                       â”‚
â”‚                                      â–¼                                       â”‚
â”‚                             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚                             â”‚   GOOGLE GEMINI  â”‚                             â”‚
â”‚                             â”‚   (IA Vision)    â”‚                             â”‚
â”‚                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. Componentes del Sistema

### 2.1 Frontend (Interfaz de Usuario)

**PropÃ³sito:** Proporcionar una interfaz web intuitiva para los empleados de la tienda.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FRONTEND                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   PÃ¡ginas   â”‚   â”‚ Componentes â”‚   â”‚  Servicios  â”‚           â”‚
â”‚   â”‚             â”‚   â”‚             â”‚   â”‚             â”‚           â”‚
â”‚   â”‚ â€¢ BÃºsqueda  â”‚   â”‚ â€¢ Barra de  â”‚   â”‚ â€¢ ConexiÃ³n  â”‚           â”‚
â”‚   â”‚ â€¢ Detalles  â”‚   â”‚   bÃºsqueda  â”‚   â”‚   con API   â”‚           â”‚
â”‚   â”‚   producto  â”‚   â”‚ â€¢ Resultadosâ”‚   â”‚ â€¢ CachÃ© de  â”‚           â”‚
â”‚   â”‚ â€¢ Importar  â”‚   â”‚ â€¢ Modales   â”‚   â”‚   datos     â”‚           â”‚
â”‚   â”‚   facturas  â”‚   â”‚ â€¢ Upload    â”‚   â”‚ â€¢ Import    â”‚           â”‚
â”‚   â”‚             â”‚   â”‚   imÃ¡genes  â”‚   â”‚   Service   â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**CaracterÃ­sticas principales:**
- ğŸ” BÃºsqueda rÃ¡pida de productos (estilo Google)
- ğŸ“¦ VisualizaciÃ³n de detalles de producto
- ğŸ“Š Indicadores de stock (disponible, bajo, agotado)
- ğŸ’° InformaciÃ³n de precios y mÃ¡rgenes
- âŒ¨ï¸ NavegaciÃ³n por teclado
- ğŸ¤– ImportaciÃ³n de facturas con IA (extracciÃ³n automÃ¡tica de productos)

---

### 2.2 Backend (Servidor API)

**PropÃ³sito:** Procesar las solicitudes del frontend y gestionar la lÃ³gica de negocio.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BACKEND                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚     API     â”‚   â”‚   LÃ³gica    â”‚   â”‚   Acceso    â”‚           â”‚
â”‚   â”‚   REST      â”‚   â”‚  de Negocio â”‚   â”‚   a Datos   â”‚           â”‚
â”‚   â”‚             â”‚   â”‚             â”‚   â”‚             â”‚           â”‚
â”‚   â”‚ â€¢ Productos â”‚   â”‚ â€¢ BÃºsqueda  â”‚   â”‚ â€¢ Consultas â”‚           â”‚
â”‚   â”‚ â€¢ CategorÃ­asâ”‚   â”‚   hÃ­brida   â”‚   â”‚ â€¢ CRUD      â”‚           â”‚
â”‚   â”‚ â€¢ Inventarioâ”‚   â”‚ â€¢ ValidaciÃ³nâ”‚   â”‚ â€¢ CachÃ©     â”‚           â”‚
â”‚   â”‚ â€¢ Ventas    â”‚   â”‚ â€¢ CÃ¡lculos  â”‚   â”‚             â”‚           â”‚
â”‚   â”‚ â€¢ Import IA â”‚   â”‚ â€¢ ExtracciÃ³nâ”‚   â”‚             â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚  GOOGLE GEMINI  â”‚                            â”‚
â”‚                   â”‚  (Vision API)   â”‚                            â”‚
â”‚                   â”‚                 â”‚                            â”‚
â”‚                   â”‚ â€¢ Procesa       â”‚                            â”‚
â”‚                   â”‚   imÃ¡genes      â”‚                            â”‚
â”‚                   â”‚ â€¢ Extrae texto  â”‚                            â”‚
â”‚                   â”‚ â€¢ Interpreta    â”‚                            â”‚
â”‚                   â”‚   productos     â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Funcionalidades:**
- ğŸ” BÃºsqueda semÃ¡ntica de productos
- ğŸ“ GestiÃ³n de productos y categorÃ­as
- ğŸ“¦ Control de inventario
- ğŸ’µ Registro de ventas
- ğŸ“ˆ Alertas de stock bajo
- ğŸ¤– ExtracciÃ³n IA de facturas manuscritas (Google Gemini Vision)

---

### 2.3 Base de Datos

**PropÃ³sito:** Almacenar de forma persistente toda la informaciÃ³n del negocio.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      BASE DE DATOS                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ CategorÃ­as  â”‚   â”‚  Productos  â”‚   â”‚   Ventas    â”‚           â”‚
â”‚   â”‚             â”‚   â”‚             â”‚   â”‚             â”‚           â”‚
â”‚   â”‚ â€¢ Nombre    â”‚â—„â”€â”€â”‚ â€¢ Nombre    â”‚â”€â”€â–ºâ”‚ â€¢ Fecha     â”‚           â”‚
â”‚   â”‚ â€¢ DescripciÃ³n   â”‚ â€¢ SKU       â”‚   â”‚ â€¢ Total     â”‚           â”‚
â”‚   â”‚             â”‚   â”‚ â€¢ Precio    â”‚   â”‚ â€¢ Items     â”‚           â”‚
â”‚   â”‚             â”‚   â”‚ â€¢ Stock     â”‚   â”‚             â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â–¼                                     â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                    â”‚ Movimientos â”‚                               â”‚
â”‚                    â”‚ de Inventario                               â”‚
â”‚                    â”‚             â”‚                               â”‚
â”‚                    â”‚ â€¢ Entradas  â”‚                               â”‚
â”‚                    â”‚ â€¢ Salidas   â”‚                               â”‚
â”‚                    â”‚ â€¢ Ajustes   â”‚                               â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Entidades principales:**
- ğŸ“ **CategorÃ­as:** AgrupaciÃ³n de productos (Bebidas, Limpieza, FerreterÃ­a, etc.)
- ğŸ“¦ **Productos:** ArtÃ­culos del inventario con precios y stock
- ğŸ”„ **Movimientos:** Historial de entradas, salidas y ajustes
- ğŸ§¾ **Ventas:** Registro de transacciones

---

## 3. Flujo de Datos

### 3.1 BÃºsqueda de Productos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario â”‚â”€â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â”€â–ºâ”‚ Backend  â”‚â”€â”€â”€â”€â–ºâ”‚   Base   â”‚
â”‚  busca  â”‚     â”‚ procesa  â”‚     â”‚  busca   â”‚     â”‚ de Datos â”‚
â”‚ "arroz" â”‚     â”‚ entrada  â”‚     â”‚ matches  â”‚     â”‚ retorna  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                                  â”‚
                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚         Resultados
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Muestra    â”‚
              â”‚  productos   â”‚
              â”‚ encontrados  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Pasos:**
1. El usuario escribe en la barra de bÃºsqueda
2. El frontend espera que el usuario termine de escribir (300ms)
3. Se envÃ­a la consulta al backend
4. El backend busca en la base de datos
5. Los resultados se envÃ­an de vuelta
6. El frontend muestra los productos encontrados

---

### 3.2 Consulta de Detalle de Producto

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario â”‚â”€â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â”€â–ºâ”‚ Backend  â”‚â”€â”€â”€â”€â–ºâ”‚   Base   â”‚
â”‚  click  â”‚     â”‚ solicita â”‚     â”‚ consulta â”‚     â”‚ de Datos â”‚
â”‚producto â”‚     â”‚ detalles â”‚     â”‚ producto â”‚     â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                                  â”‚
                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚    Modal     â”‚
              â”‚   muestra:   â”‚
              â”‚ â€¢ Nombre     â”‚
              â”‚ â€¢ Precio     â”‚
              â”‚ â€¢ Stock      â”‚
              â”‚ â€¢ CategorÃ­a  â”‚
              â”‚ â€¢ Margen     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.3 ImportaciÃ³n de Productos con IA

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario â”‚â”€â”€â”€â”€â–ºâ”‚ Frontend â”‚â”€â”€â”€â”€â–ºâ”‚ Backend  â”‚â”€â”€â”€â”€â–ºâ”‚  Google  â”‚â”€â”€â”€â”€â–ºâ”‚ Backend  â”‚
â”‚  sube   â”‚     â”‚ convierteâ”‚     â”‚ envÃ­a a  â”‚     â”‚  Gemini  â”‚     â”‚ procesa  â”‚
â”‚ imagen  â”‚     â”‚ a Base64 â”‚     â”‚   IA     â”‚     â”‚ extrae   â”‚     â”‚ respuestaâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚                                                   â”‚
                     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚        Productos extraÃ­dos
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Preview    â”‚
              â”‚   muestra:   â”‚
              â”‚ â€¢ Productos  â”‚
              â”‚   detectados â”‚
              â”‚ â€¢ Cantidades â”‚
              â”‚ â€¢ Precios    â”‚
              â”‚ â€¢ CategorÃ­as â”‚
              â”‚   sugeridas  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Usuario    â”‚
              â”‚   confirma   â”‚
              â”‚   o edita    â”‚
              â”‚   productos  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Flujo detallado:**
1. El usuario sube una o mÃ¡s imÃ¡genes de facturas manuscritas
2. El frontend convierte las imÃ¡genes a Base64
3. Se envÃ­a al endpoint `/api/v1/import/extract-preview`
4. El backend envÃ­a la imagen a Google Gemini Vision
5. Gemini interpreta la escritura a mano y extrae productos
6. El backend procesa la respuesta y valida los datos
7. El frontend muestra un preview con los productos detectados
8. El usuario puede editar, confirmar o descartar productos
9. Al confirmar, se crean los productos/entradas de inventario

**CaracterÃ­sticas de la IA:**
- ğŸ“· Procesa imÃ¡genes de facturas manuscritas
- âœï¸ Interpreta escritura a mano ilegible
- ğŸ”§ Corrige errores de lectura automÃ¡ticamente
- ğŸ“ Sugiere categorÃ­as basadas en el producto
- ğŸ”— Empareja con productos existentes del catÃ¡logo

---

## 4. Usuarios del Sistema

### 4.1 Empleado de Tienda (Usuario Principal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ‘¤ EMPLEADO DE TIENDA                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Necesidades:                    Acciones:                      â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚
â”‚   â€¢ Encontrar productos           â€¢ Buscar por nombre/SKU        â”‚
â”‚     rÃ¡pidamente                   â€¢ Ver precio de venta          â”‚
â”‚   â€¢ Verificar disponibilidad      â€¢ Consultar stock              â”‚
â”‚   â€¢ Atender clientes              â€¢ Ver detalles de producto     â”‚
â”‚     eficientemente                                               â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. CaracterÃ­sticas del Sistema

### 5.1 BÃºsqueda Inteligente

| CaracterÃ­stica | DescripciÃ³n |
|----------------|-------------|
| ğŸ” BÃºsqueda instantÃ¡nea | Resultados mientras escribes |
| ğŸ¯ BÃºsqueda por nombre | Encuentra "Coca Cola" escribiendo "coca" |
| ğŸ“ BÃºsqueda por SKU | Encuentra productos por cÃ³digo |
| ğŸŒ Tolerancia a errores | Encuentra aunque haya errores de escritura |

### 5.2 GestiÃ³n de Inventario

| CaracterÃ­stica | DescripciÃ³n |
|----------------|-------------|
| ğŸ“Š Stock en tiempo real | Cantidad actual disponible |
| âš ï¸ Alertas de stock bajo | Aviso cuando el stock es crÃ­tico |
| ğŸš« Indicador sin stock | Productos agotados claramente marcados |

### 5.3 InformaciÃ³n de Precios

| CaracterÃ­stica | DescripciÃ³n |
|----------------|-------------|
| ğŸ’° Precio de venta | Lo que paga el cliente |
| ğŸ“‰ Precio de costo | Lo que pagÃ³ la tienda |
| ğŸ“ˆ Margen de ganancia | Diferencia entre venta y costo |

### 5.4 ImportaciÃ³n con IA ğŸ¤–

| CaracterÃ­stica | DescripciÃ³n |
|----------------|-------------|
| ğŸ“· Subir imÃ¡genes | Arrastra o selecciona fotos de facturas |
| âœ¨ ExtracciÃ³n automÃ¡tica | IA lee y extrae productos de la imagen |
| âœï¸ InterpretaciÃ³n inteligente | Corrige errores de escritura a mano |
| ğŸ“‹ Preview editable | Revisa y ajusta antes de confirmar |
| ğŸ”— Emparejamiento | Detecta productos existentes en catÃ¡logo |
| ğŸ“ CategorizaciÃ³n | Sugiere categorÃ­as automÃ¡ticamente |

**Ejemplos de correcciÃ³n inteligente:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CORRECCIÃ“N AUTOMÃTICA DE ESCRITURA                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   Texto manuscrito        â†’    Producto detectado               â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€             â”‚
â”‚                                                                  â”‚
â”‚   "Gu hidraustice"        â†’    Gato HidrÃ¡ulico                  â”‚
â”‚   "Aceite 10w40"          â†’    Aceite de Motor 10W-40           â”‚
â”‚   "Camara GRIS"           â†’    CÃ¡mara de Llanta Gris            â”‚
â”‚   "Borne Pl"              â†’    Borne de BaterÃ­a Plomo           â”‚
â”‚   "Silicona spry"         â†’    Silicona en Spray                â”‚
â”‚                                                                  â”‚
â”‚   La IA usa el contexto del proveedor para interpretar:         â”‚
â”‚   "LUBRICANTES" â†’ productos automotrices                        â”‚
â”‚   "FERRETERÃA"  â†’ herramientas y materiales                     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. CategorÃ­as de Productos

El sistema maneja las siguientes categorÃ­as:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CATEGORÃAS DE PRODUCTOS                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  ğŸº Bebidas               ğŸ§¹ Limpieza          ğŸ”§ FerreterÃ­a     â”‚
â”‚  ğŸ¥› LÃ¡cteos               ğŸ§´ Higiene Personal  ğŸ¨ Pinturas       â”‚
â”‚  ğŸš Abarrotes             ğŸ¬ Snacks            ğŸŒ¾ Herramientas   â”‚
â”‚  ğŸ¥« Enlatados             ğŸ PanaderÃ­a              AgrÃ­colas    â”‚
â”‚  ğŸ¥© Carnes/Embutidos      ğŸ¥¬ Frutas/Verduras   ğŸ’¡ ElectrÃ³nicos   â”‚
â”‚  ğŸš¿ Mangueras/Riego       ğŸ›ï¸ Colchones/Hogar   ğŸš² Bicicletas     â”‚
â”‚  ğŸ‘Ÿ Calzado               ğŸš— Lubricantes/Auto                    â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Entornos del Sistema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ENTORNOS                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚ DESARROLLO  â”‚   â”‚   STAGING   â”‚   â”‚ PRODUCCIÃ“N  â”‚           â”‚
â”‚   â”‚             â”‚   â”‚             â”‚   â”‚             â”‚           â”‚
â”‚   â”‚ Para        â”‚   â”‚ Para        â”‚   â”‚ Para uso    â”‚           â”‚
â”‚   â”‚ programar   â”‚   â”‚ pruebas     â”‚   â”‚ real en     â”‚           â”‚
â”‚   â”‚ y probar    â”‚   â”‚ finales     â”‚   â”‚ la tienda   â”‚           â”‚
â”‚   â”‚ localmente  â”‚   â”‚             â”‚   â”‚             â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. Diagrama de InteracciÃ³n

```
                         COMERCIAL COMARAPA
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                             â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚                    EMPLEADO                          â”‚   â”‚
    â”‚  â”‚                       ğŸ‘¤                             â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚                          â”‚                                  â”‚
    â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
    â”‚            â–¼                           â–¼                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
    â”‚  â”‚  INTERFAZ BÃšSQUEDA  â”‚     â”‚  IMPORTAR FACTURAS  â”‚      â”‚
    â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚
    â”‚  â”‚ â”‚ğŸ” Buscar...     â”‚ â”‚     â”‚ â”‚ğŸ“· Subir imagen  â”‚ â”‚      â”‚
    â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
    â”‚             â”‚                           â”‚                  â”‚
    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”         â”‚
    â”‚     â–¼       â–¼       â–¼           â–¼       â–¼       â–¼         â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â”     â”‚
    â”‚  â”‚ Ver  â”‚â”‚Consulâ”‚â”‚Verif.â”‚   â”‚ IA   â”‚â”‚Previewâ”‚â”‚Confirâ”‚     â”‚
    â”‚  â”‚precioâ”‚â”‚detallesâ”‚stock â”‚   â”‚extraeâ”‚â”‚editarâ”‚â”‚ mar  â”‚     â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜     â”‚
    â”‚                                                             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Beneficios del Sistema

| Beneficio | DescripciÃ³n |
|-----------|-------------|
| âš¡ **Rapidez** | BÃºsqueda instantÃ¡nea, menos tiempo por cliente |
| ğŸ¯ **PrecisiÃ³n** | InformaciÃ³n exacta de precios y stock |
| ğŸ“± **Accesibilidad** | Funciona en computadoras y tablets |
| ğŸ”„ **ActualizaciÃ³n** | Datos siempre actualizados |
| ğŸ“Š **Visibilidad** | Stock bajo claramente identificado |
| ğŸ¤– **AutomatizaciÃ³n** | ImportaciÃ³n de facturas con IA elimina entrada manual |

---

## 10. PrÃ³ximas Funcionalidades (Roadmap)

### Fase 1 âœ… (Completada)
- BÃºsqueda de productos
- VisualizaciÃ³n de detalles
- Indicadores de stock

### Fase 2 âœ… (Completada)
- GestiÃ³n de inventario
- Entradas, salidas y ajustes
- **ImportaciÃ³n con IA** (Google Gemini Vision)
  - ExtracciÃ³n de facturas manuscritas
  - InterpretaciÃ³n inteligente de escritura
  - Preview y ediciÃ³n de productos

### PrÃ³xima Fase ğŸ”œ
- Registro de ventas
- Reportes de inventario
- GestiÃ³n de usuarios

### Futuro ğŸ“‹
- Escaneo de cÃ³digo de barras
- IntegraciÃ³n con facturaciÃ³n
- AplicaciÃ³n mÃ³vil

---

**Documento mantenido por:** Equipo Comercial Comarapa  
**Ãšltima actualizaciÃ³n:** Enero 2026


